---
import { getCollection, render } from 'astro:content';

const chartEntries = await getCollection('charts');
const sorted = chartEntries.sort((a, b) => a.data.order - b.data.order);

const charts = await Promise.all(
	sorted.map(async (entry) => {
		const { Content } = await render(entry);
		return { data: entry.data, body: entry.body, Content };
	})
);
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>WTF Happened in 2025?</title>

		<!-- Primary Meta Tags -->
		<meta name="title" content="WTF Happened in 2025?" />
		<meta name="description" content="A collection of datapoints in or around 2025 which we may look back as a historical inflection point. Open source & curated in realtime by Latent Space." />
		<meta name="theme-color" content="#000000" />

		<!-- Open Graph / Facebook -->
		<meta property="og:site_name" content="WTF Happened in 2025?" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://wtfhappened2025.com/" />
		<meta property="og:title" content="WTF Happened in 2025?" />
		<meta property="og:description" content="A collection of datapoints in or around 2025 which we may look back as a historical inflection point. Open source & curated in realtime by Latent Space." />
		<meta property="og:image" content="https://wtfhappened2025.com/images/metr2025.png" />
		<meta property="og:image:alt" content="METR trendline of Long Tasks Agent Capabilities" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:url" content="https://wtfhappened2025.com/" />
		<meta name="twitter:title" content="WTF Happened in 2025?" />
		<meta name="twitter:description" content="A collection of datapoints in or around 2025 which we may look back as a historical inflection point. Open source & curated in realtime by Latent Space." />
		<meta name="twitter:image" content="https://wtfhappened2025.com/images/openclaw-stars-square.png" />
		<meta name="twitter:image:alt" content="OpenClaw stars growth chart" />

		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				background-color: #000;
				color: #fff;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
				min-height: 100vh;
			}

			header {
				text-align: center;
				padding: 40px 20px 60px;
			}

			header h1 {
				font-size: clamp(3rem, 8vw, 5rem);
				font-weight: 900;
				letter-spacing: -0.02em;
				line-height: 1.1;
				background: linear-gradient(135deg, #fff 0%, #a5a5a5 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				margin-bottom: 20px;
			}

			.subtitle {
				font-size: clamp(1.1rem, 2vw, 1.4rem);
				color: #888;
				max-width: 800px;
				margin: 0 auto;
				line-height: 1.5;
			}

			.subtitle a {
				color: #ccc;
				text-decoration: none;
				border-bottom: 1px solid rgba(204, 204, 204, 0.3);
				transition: color 0.3s ease, border-color 0.3s ease;
			}

			.subtitle a:hover {
				color: #fff;
				border-color: #fff;
			}

			.charts {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 60px;
				padding: 20px 20px 80px;
				max-width: 900px;
				margin: 0 auto;
			}

			.charts img {
				width: 100%;
				height: auto;
				display: block;
				border-radius: 6px;
			}

			.chart-card {
				/* width: 100%; */
				position: relative;
				background: #111;
				padding: 16px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.05);
				transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
			}

			.chart-card:hover {
				transform: translateY(-4px);
				border-color: rgba(255, 255, 255, 0.15);
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
			}

			.main-link {
				display: block;
				text-decoration: none;
				color: #fff;
			}

			.chart-label {
				/* font-size: clamp(1.1rem, 2.5vw, 1.4rem); */
				max-width: 80%;
				margin: 0 auto;
				font-weight: 600;
				color: #a0a0a0;
				margin-top: 24px;
				margin-bottom: 8px;
				line-height: 1.3;
				display: block;
				text-align: center;
				transition: color 0.3s ease;
			}

			.chart-label p {
				margin: 0;
			}

			.chart-card:hover .chart-label {
				color: #fff;
			}

			.extra-links {
				position: absolute;
				bottom: -14px;
				right: 24px;
				display: flex;
				align-items: center;
				gap: 8px;
				font-size: 0.8rem;
				color: #666;
				background: #000;
				padding: 4px 12px;
				border-radius: 20px;
				border: 1px solid rgba(255, 255, 255, 0.1);
				z-index: 10;
			}

			.extra-link {
				color: #999;
				text-decoration: none;
				transition: color 0.2s ease;
			}

			.extra-link:hover {
				color: #fff;
			}

			footer {
				text-align: center;
				padding: 40px 20px;
				font-size: 0.85rem;
				color: #666;
			}

			footer a {
				color: #888;
				text-decoration: none;
			}

			footer a:hover {
				color: #fff;
			}

		</style>
	</head>
	<body>
		<header>
			<h1>WTF Happened in 2025?</h1>
			<p class="subtitle">A collection of datapoints in or around 2025 which we may look back as a historical inflection point. Open source & curated in realtime by <a href="https://www.latent.space/p/wtf2025" target="_blank" rel="noopener noreferrer">Latent Space</a>.</p>
		</header>

		<main class="charts">
			{charts.map(({ data, body, Content }) => (
				<div class="chart-card">
					<a href={data.url} target="_blank" rel="noopener noreferrer" class="main-link">
						<img src={data.img} alt={body?.trim()} />
						<div class="chart-label"><Content /></div>
					</a>
					{data.extraLinks && data.extraLinks.length > 0 && (
						<span class="extra-links">
							More: {data.extraLinks.map(link => (
								<a href={link.url} target="_blank" rel="noopener noreferrer" class="extra-link">
									{link.label}
								</a>
							))}
						</span>
					)}
				</div>
			))}
		</main>

		<footer>
			<p>Have a chart that belongs here? <a href="https://github.com/swyxio/wtf2025/tree/main/src/data/charts" target="_blank" rel="noopener noreferrer">Open a PR</a> to add it.</p>
			<p><a href="https://github.com/swyxio/wtf2025" target="_blank" rel="noopener noreferrer">Source on GitHub</a> &bull; Inspired by <a href="https://wtfhappenedin1971.com/" target="_blank" rel="noopener noreferrer">WTF Happened In 1971?</a></p>
		</footer>
	</body>
</html>
